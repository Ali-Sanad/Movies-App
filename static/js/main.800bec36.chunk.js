(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(13),i=a.n(r),o=a(4),s=a(9),d=a(28),u=a(29),j=a(16),l=a(2),p="GET_DATA",b="DATA_ERROR",v="ADD_CATEGORY",m="ADD_MOVIE",O="EDIT_MOVIE",f="DELETE_MOVIE",x={data:[],loading:!0,error:{}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case p:return Object(l.a)(Object(l.a)({},e),{},{data:n,loading:!1});case v:return Object(l.a)(Object(l.a)({},e),{},{data:[n].concat(Object(j.a)(e.data)),loading:!1});case m:case O:case f:return Object(l.a)(Object(l.a)({},e),{},{data:n,loading:!1});case b:return Object(l.a)(Object(l.a)({},e),{},{error:n,loading:!1});default:return e}},h=Object(s.combineReducers)({AppData:y}),g=Object(s.createStore)(h,Object(d.composeWithDevTools)(Object(s.applyMiddleware)(u.a))),D=a(5),I=a.n(D),A=a(7),N=a(30),k=a.n(N).a.create({baseURL:"https://my-json-server.typicode.com/Ali-Sanad/json-server-db/categories"}),C=a(6),E=a(15),M=a(8),w=a(1),S=Object(o.b)(null,{editMovie:function(e){var t=e.name,a=e.description,n=e.id,c=e.categoryId;return function(){var e=Object(A.a)(I.a.mark((function e(r,i){var o,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=i().AppData.data.map((function(e){return e.id===c?Object(l.a)(Object(l.a)({},e),{},{movies:e.movies.map((function(e){return e.id===n?Object(l.a)(Object(l.a)({},e),{},{name:t,description:a}):e}))}):e})),s=o.filter((function(e){return e.id===c}))[0],e.next=5,k.put("/".concat(c),s);case 5:r({type:O,payload:o}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r({type:b,payload:{msg:"server error"}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()}})((function(e){var t=e.name,a=e.description,c=e.id,r=e.categoryId,i=e.editMovie,o=Object(n.useState)({name:t,description:a}),s=Object(C.a)(o,2),d=s[0],u=s[1];Object(n.useEffect)((function(){u({name:t,description:a})}),[t,a]);var j=function(e){u(Object(l.a)(Object(l.a)({},d),{},Object(M.a)({},e.target.name,e.target.value)))},p=function(e){e.preventDefault(),i(Object(l.a)(Object(l.a)({},d),{},{id:c,categoryId:r}))};return Object(w.jsx)("div",{className:"form-container",children:Object(w.jsxs)("form",{onSubmit:p,className:"form",children:[Object(w.jsxs)("label",{children:[Object(w.jsx)("p",{children:"Name*"}),Object(w.jsx)("input",{type:"text",className:"edit-input",value:d.name,name:"name",onChange:j})]}),Object(w.jsxs)("label",{children:[Object(w.jsx)("p",{children:"Description"}),Object(w.jsx)("input",{type:"text",className:"edit-input",value:d.description,name:"description",onChange:j})]}),Object(w.jsx)("button",{className:"save-edit",type:"submit",onClick:p,children:"Save"})]})})})),T=function(e){var t=e.onSubmitAction,a=e.category,c=void 0!==a&&a,r=(e.movie,e.categoryId),i=Object(n.useState)({name:"",description:""}),o=Object(C.a)(i,2),s=o[0],d=o[1],u=s.name,j=s.description,p=function(e){d(Object(l.a)(Object(l.a)({},s),{},Object(M.a)({},e.target.name,e.target.value)))};return Object(w.jsxs)("div",{className:"form-container",children:[c?"Add Category":"Add Movie",Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({name:u,description:j,categoryId:r}),d({name:"",description:""})},className:"form",children:[Object(w.jsx)("input",{value:u,onChange:p,type:"text",name:"name",placeholder:"English Name*"}),Object(w.jsx)("textarea",{value:j,onChange:p,name:"description",placeholder:"English Description",rows:2}),Object(w.jsx)("button",{type:"submit",children:c?"Create Category":"Create Movie"})]})]})},R=Object(o.b)(null,{addMovie:function(e){var t=e.name,a=e.description,n=e.categoryId;return function(){var e=Object(A.a)(I.a.mark((function e(c,r){var i,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=r().AppData.data.map((function(e){return e.id===n?Object(l.a)(Object(l.a)({},e),{},{movies:[].concat(Object(j.a)(e.movies),[{name:t,description:a,id:Math.floor(1e5+9e5*Math.random())}])}):e})),o=i.filter((function(e){return e.id===n}))[0],e.next=5,k.put("/".concat(n),o);case 5:c({type:m,payload:i}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:b,payload:{msg:"server error"}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()}})((function(e){var t=e.addMovie,a=e.categoryId;return Object(w.jsx)(T,{movie:!0,onSubmitAction:t,categoryId:a})})),_=Object(o.b)(null,{deleteMovie:function(e){var t=e.id,a=e.categoryId;return function(){var e=Object(A.a)(I.a.mark((function e(n,c){var r,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=c().AppData.data.map((function(e){return e.id===a?Object(l.a)(Object(l.a)({},e),{},{movies:e.movies.filter((function(e){return e.id!==t}))}):e})),i=r.filter((function(e){return e.id===a}))[0],e.next=5,k.put("/".concat(a),i);case 5:n({type:f,payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:b,payload:{msg:"server error"}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()}})((function(e){var t=e.content,a=e.categoryId,c=e.deleteMovie,r=Object(n.useState)({name:"",description:"",id:0}),i=Object(C.a)(r,2),o=i[0],s=i[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(S,Object(l.a)(Object(l.a)({},o),{},{categoryId:a})),Object(w.jsx)(R,{categoryId:a}),null===t||void 0===t?void 0:t.map((function(e){var t=e.name,n=e.description,r=e.id;return Object(w.jsxs)("div",{className:"movie-title",onClick:function(){return""},children:[Object(w.jsxs)("div",{className:"icon-container",children:[Object(w.jsx)(E.a,{size:20,style:{margin:"0 10px"}})," ",t]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{className:"edit",onClick:function(){return s({name:t,description:n,id:r})},children:"Edit"}),Object(w.jsx)("button",{className:"delete",onClick:function(){return c({id:r,categoryId:a})},children:"Delete"})]})]},r)}))]})})),V=function(e){var t=e.title,a=e.content,c=e.categoryId,r=Object(n.useState)(!1),i=Object(C.a)(r,2),o=i[0],s=i[1];return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"accordion-title",onClick:function(){return s(!o)},children:[Object(w.jsx)(E.a,{size:30,style:{margin:"0 10px"}})," ",t]}),o&&Object(w.jsx)("div",{className:"accordion-content",children:Object(w.jsx)(_,{content:a,categoryId:c})})]})},z=Object(o.b)(null,{addCategory:function(e){var t=e.name,a=e.description,n=e.movies,c=void 0===n?[]:n;return function(){var e=Object(A.a)(I.a.mark((function e(n){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("/",{name:t,description:a,movies:c});case 3:r=e.sent,n({type:v,payload:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({type:b,payload:{msg:"server error"}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.addCategory;return Object(w.jsx)(T,{category:!0,onSubmitAction:t})}));var G=Object(o.b)((function(e){return{data:e.AppData.data}}),{getApiData:function(){return function(){var e=Object(A.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/");case 3:a=e.sent,t({type:p,payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:b,payload:{msg:"server error"}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getApiData,a=e.data;return Object(n.useEffect)((function(){t()}),[t]),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)("div",{className:"category",children:Object(w.jsx)(z,{})}),Object(w.jsx)("div",{className:"movies-data",children:Object(w.jsxs)("div",{className:"accordion",children:[Object(w.jsx)("h3",{children:" Movies Data"}),null===a||void 0===a?void 0:a.map((function(e){var t=e.name,a=e.movies,n=e.id;return Object(w.jsx)(V,{title:t,content:a,categoryId:n},n)}))]})})]})}));a(61);var J=function(){return Object(w.jsx)(o.a,{store:g,children:Object(w.jsx)(G,{})})};i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(J,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.800bec36.chunk.js.map